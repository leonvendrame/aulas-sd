.INCLUDE "m328Pdef.inc"

.EQU LED0 = PB0
.EQU BTN0 = PB2

START:
	SBI DDRB, LED0
	CBI DDRB, BTN0
	SBI PORTB, BTN0
	NOP

MAIN:
	SBIC PINB, BTN0
	RJMP MAIN

	SBIC PORTB, LED0
	RJMP TURN_LED_OFF
	RJMP TURN_LED_ON

	WAITING:
		SBIS PINB, BTN0
		RJMP WAITING
	
	CALL ATRASO
	RJMP MAIN

TURN_LED_OFF:
	CBI PORTB, LED0
	RJMP WAITING

TURN_LED_ON:
	SBI PORTB, LED0
	RJMP WAITING

DELAY:
	DEC R0
 	BRNE DELAY
 	DEC R1
 	BRNE DELAY
	RET